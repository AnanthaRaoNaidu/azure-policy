{
  "id": "/providers/Microsoft.Authorization/policyDefinitions/49c88fc8-6fd1-46fd-a676-f12d1d3a4c71",
  "name": "49c88fc8-6fd1-46fd-a676-f12d1d3a4c71",
  "properties": {
    "policyType": "BuiltIn",
    "metadata": {
      "version": "1.0.0",
      "category": "Tags"
    },
    "parameters": {
      "tagValue": {
        "type": "String",
        "metadata": {
          "description": "Value of the tag, such as 'production'",
          "displayName": "Tag Value"
        }
      },
      "tagName": {
        "type": "String",
        "metadata": {
          "description": "Name of the tag, such as 'environment'",
          "displayName": "Tag Name"
        }
      }
    },
    "displayName": "Append tag and its default value to resource groups",
    "policyRule": {
      "then": {
        "details": [
          {
            "value": "[parameters('tagValue')]",
            "field": "[concat('tags[', parameters('tagName'), ']')]"
          }
        ],
        "effect": "append"
      },
      "if": {
        "allOf": [
          {
            "field": "type",
            "equals": "Microsoft.Resources/subscriptions/resourceGroups"
          },
          {
            "exists": "false",
            "field": "[concat('tags[', parameters('tagName'), ']')]"
          }
        ]
      }
    },
    "description": "Appends the specified tag and value when any resource group which is missing this tag is created or updated. Does not modify the tags of resource groups created before this policy was applied until those resource groups are changed. New 'modify' effect policies are available that support remediation of tags on existing resources (see https://aka.ms/modifydoc).",
    "mode": "All"
  }
}
