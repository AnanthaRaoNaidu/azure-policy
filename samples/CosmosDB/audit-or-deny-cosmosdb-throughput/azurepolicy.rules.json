"if": {
  "allOf": [
    {
      "field": "type",
      "equals": "Microsoft.DocumentDB/databaseAccounts"
    },
    {
      "anyOf": [
        {
          "allOf": [
            {
              "value": "[parameters('throughputType')]",
              "equals": "Shared"
            },
            {
              "anyOf": [
                {
                  "field": "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/throughputSettings/default.resource.throughput",
                  "greater": "[parameters('throughPutMax')]"
                },
                {
                  "field": "Microsoft.DocumentDB/databaseAccounts/cassandraKeyspaces/throughputSettings/default.resource.throughput",
                  "greater": "[parameters('throughPutMax')]"
                },
                {
                  "field": "Microsoft.DocumentDB/databaseAccounts/gremlinDatabases/throughputSettings/default.resource.throughput",
                  "greater": "[parameters('throughPutMax')]"
                },
                {
                  "field": "Microsoft.DocumentDB/databaseAccounts/mongodbDatabases/throughputSettings/default.resource.throughput",
                  "greater": "[parameters('throughPutMax')]"
                },
                {
                  "field": "Microsoft.DocumentDB/databaseAccounts/tables/throughputSettings/default.resource.throughput",
                  "greater": "[parameters('throughPutMax')]"
                }
              ]
            }
          ]
        },
        {
          "allOf": [
            {
              "value": "[parameters('throughputType')]",
              "equals": "Dedicated"
            },
            {
              "anyOf": [
                {
                  "field": "Microsoft.DocumentDB/databaseAccounts/sqlDatabases/containers/throughputSettings/default.resource.throughput",
                  "greater": "[parameters('throughPutMax')]"
                    },
                {
                  "field": "Microsoft.DocumentDB/databaseAccounts/cassandraKeyspaces/tables/throughputSettings/default.resource.throughput",
                  "greater": "[parameters('throughPutMax')]"
                },
                {
                  "field": "Microsoft.DocumentDB/databaseAccounts/gremlinDatabases/graphs/throughputSettings/default.resource.throughput",
                  "greater": "[parameters('throughPutMax')]"
                },
                {
                  "field": "Microsoft.DocumentDB/databaseAccounts/mongodbDatabases/collections/throughputSettings/default.resource.throughput",
                  "greater": "[parameters('throughPutMax')]"
                },
                {
                  "field": "Microsoft.DocumentDB/databaseAccounts/tables/throughputSettings/default.resource.throughput",
                  "greater": "[parameters('throughPutMax')]"
                }
              ]
            }
          ]
        }
      ]
    }
  ]
},
"then": {
  "effect": "[parameters('effectType')]"
}
