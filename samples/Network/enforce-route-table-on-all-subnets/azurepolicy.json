{
	"properties": {
		"displayName": "Enforces an UDR on all subnets",
		"description": "Denies the creation of subnets without an UDR",
		"mode": "Indexed",
		"policyRule": {
			"if": {
				"anyOf": [
					{
						"allOf": [
							{
								"field": "type",
								"equals": "Microsoft.Network/virtualNetworks"
							},
							{
								"field": "Microsoft.Network/virtualNetworks/subnets[*].routeTable",
								"exists": false
							}
						]
					},
					{
						"allOf": [
							{
								"field": "type",
								"equals": "Microsoft.Network/virtualNetworks/subnets"
							},
							{
								"field": "Microsoft.Network/virtualNetworks/subnets/routeTable",
								"exists": false
							}
						]
					}
				]
			},
			"then": {
				"effect": "deny"
			}
		}
	}
}